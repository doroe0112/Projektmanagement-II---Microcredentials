<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ðŸ’­ Bubble chart with D3.js</title>

    <script src="https://d3js.org/d3.v7.js"></script>

    <link rel="stylesheet" href="styles.css"/>
</head>

<body>
<div id="myBtnContainer">
    <p>Sortieren nach:</p>
    <button class="btn active" onclick="filterSelection('all')">Show all</button>
    <button class="btn" onclick="filterSelection('semester')">Semester</button>
    <button class="btn" onclick="filterSelection('list')">Liste</button>
</div>

<hr>

<svg id="chart"></svg>

<script>
    const svg = d3.select("#chart");
    const width = window.innerWidth;
    const height = window.innerHeight;

    svg.attr("width", width).attr("height", height);

    let numNodes = 100;
    let nodes = d3.range(numNodes).map(function (d, i) {
        return {
            name: `${Math.random() * 25}`,
            size: Math.random() * 25,
            value: i % 3
        }
    });

    // Sort the data in descending order based on the value property
    nodes.sort(function (x, y) {
        return d3.descending(x.size, y.size);
    });

    const simulation = d3.forceSimulation(nodes)
        .force("center", d3.forceCenter(width / 2, height / 2))
        .force("collide", d3.forceCollide((d) => d.size + 1));

    const bubbles = svg.selectAll(".bubble")
        .data(nodes)
        .enter()
        .append("circle")
        .attr("class", "bubble")
        .attr("r", (d) => d.size)
        .attr("fill", "steelblue");

    simulation.on("tick", ticked);

    function ticked() {
        bubbles
            .attr("cx", (d) => d.x)
            .attr("cy", (d) => d.y);
    }

    // Start the simulation after sorting the bubbles
    simulation.alpha(1).restart();
</script>
</body>

</html>